/**
*
** Blocs : paramètres & aperçus
*
* Défaut / Titres
* ACF / Introduction
* ACF / Image
* ACF / Citation
* ACF / CTA
* ACF / Galerie
* ACF / Embed
*
**/

@use "../var-sass" as *;
@use "../mixins" as *;


/*=================================
=            Interface            =
=================================*/

.editor-preview-dropdown, // aperçu responsive
.block-editor-inserter__tips, // astuces dans le menu des blocs
.typography-block-support-panel // box typographie
{ display: none !important; }

// liens d'aide
#editor {
	// to check !!!
	a[target="_blank"]:not(.button):not([aria-label="Voir la page"]):not([data-name="filename"]),
	a[href="edit.php?post_type=wp_block"] { display: none !important; }
}

// champ ACF message d'alerte
.acf-message-warning {
	color: #ff5e5e;
	label { font-weight: bold !important; }
}

// bloc en erreur
.editor-error {
	padding:1rem;
	background-color: #ff5e5e;
	text-align: center;
	font-weight: bold;
}


/*----------  Groupe de boutons d'alignement  ----------*/

.acf-field-button-group .acf-button-group label { padding-inline: 8px; }

[data-name="bloc_position_h"],
[data-name="bloc_inner_position_v"],
[data-name="bloc_inner_position_h"],
[data-name="bloc_text_align"] {

	.acf-button-group label {
		display: flex;
		flex-direction: column;
		align-items: center;

		&:before {
			content:"";
			display: block;
			width: 24px;
			height: 24px;
			background-position: center;
			background-repeat: no-repeat;
		}
	}
}

$icons_url : "../../wpreform3/images/admin/";
$icons_fill_default : #444;
$icons_fill_selected : #fff;

[data-name="bloc_position_h"] .acf-button-group label {

	&:has([value="center"])::before {
		background-image: svg-load( $icons_url + "align-center.svg", fill=$icons_fill_default );
	}
	&:has([value="center"]).selected::before {
		background-image: svg-load( $icons_url + "align-center.svg", fill=$icons_fill_selected );
	}
	&:has([value="left"])::before {
		background-image: svg-load( $icons_url + "align-left.svg", fill=$icons_fill_default );
	}
	&:has([value="left"]).selected::before {
		background-image: svg-load( $icons_url + "align-left.svg", fill=$icons_fill_selected );
	}
	&:has([value="right"])::before {
		background-image: svg-load( $icons_url + "align-right.svg", fill=$icons_fill_default );
	}
	&:has([value="right"]).selected::before {
		background-image: svg-load( $icons_url + "align-right.svg", fill=$icons_fill_selected );
	}
	&:has([value="wide"])::before {
		background-image: svg-load( $icons_url + "align-wide.svg", fill=$icons_fill_default );
	}
	&:has([value="wide"]).selected::before {
		background-image: svg-load( $icons_url + "align-wide.svg", fill=$icons_fill_selected );
	}
}

[data-name="bloc_inner_position_v"] .acf-button-group label {

	&:has([value="both"])::before {
		background-image: svg-load( $icons_url + "align-v-both.svg", fill=$icons_fill_default );
	}
	&:has([value="both"]).selected::before {
		background-image: svg-load( $icons_url + "align-v-both.svg", fill=$icons_fill_selected );
	}
	&:has([value="top"])::before {
		background-image: svg-load( $icons_url + "align-v-top.svg", fill=$icons_fill_default );
	}
	&:has([value="top"]).selected::before {
		background-image: svg-load( $icons_url + "align-v-top.svg", fill=$icons_fill_selected );
	}
	&:has([value="bottom"])::before {
		background-image: svg-load( $icons_url + "align-v-bottom.svg", fill=$icons_fill_default );
	}
	&:has([value="bottom"]).selected::before {
		background-image: svg-load( $icons_url + "align-v-bottom.svg", fill=$icons_fill_selected );
	}
	&:has([value="center"])::before {
		background-image: svg-load( $icons_url + "align-v-center.svg", fill=$icons_fill_default );
	}
	&:has([value="center"]).selected::before {
		background-image: svg-load( $icons_url + "align-v-center.svg",fill=$icons_fill_selected );
	}
}

[data-name="bloc_inner_position_h"] .acf-button-group label {

	&:has([value="center"])::before {
		background-image: svg-load( $icons_url + "align-inner-center.svg",fill=$icons_fill_default );
	}
	&:has([value="center"]).selected::before {
		background-image: svg-load( $icons_url + "align-inner-center.svg",fill=$icons_fill_selected );
	}
	&:has([value="left"])::before {
		background-image: svg-load( $icons_url + "align-inner-left.svg",fill=$icons_fill_default );
	}
	&:has([value="left"]).selected::before {
		background-image: svg-load( $icons_url + "align-inner-left.svg",fill=$icons_fill_selected );
	}
	&:has([value="right"])::before {
		background-image: svg-load( $icons_url + "align-inner-right.svg",fill=$icons_fill_default );
	}
	&:has([value="right"]).selected::before {
		background-image: svg-load( $icons_url + "align-inner-right.svg",fill=$icons_fill_selected );
	}
}

[data-name="bloc_text_align"] .acf-button-group label {

	&:has([value="center"])::before {
		background-image: svg-load( $icons_url + "align-text-center.svg",fill=$icons_fill_default );
	}
	&:has([value="center"]).selected::before {
		background-image: svg-load( $icons_url + "align-text-center.svg",fill=$icons_fill_selected );
	}
	&:has([value="left"])::before {
		background-image: svg-load( $icons_url + "align-text-left.svg",fill=$icons_fill_default );
	}
	&:has([value="left"]).selected::before {
		background-image: svg-load( $icons_url + "align-text-left.svg",fill=$icons_fill_selected );
	}
	&:has([value="right"])::before {
		background-image: svg-load( $icons_url + "align-text-right.svg",fill=$icons_fill_default );
	}
	&:has([value="right"]).selected::before {
		background-image: svg-load( $icons_url + "align-text-right.svg",fill=$icons_fill_selected );
	}
}


/*=====  FIN Interface  =====*/


/*===============================
=            Communs            =
===============================*/

:root {
	--pc-grid : repeat(12,1fr);
}

$maw-txt : 600;
$maw-wide : 800; // idem theme.json
$space-max : 20;

.wp-block-post-content {
	line-height: 1.5;

	> p, > ul, > ol, > h1, > h2, > h3 { max-width:rem($maw-txt)!important; }
	> .acf-block-preview { margin:rem($space-max) 0; }

	.bloc-position-h--center { 
		max-width: rem($maw-txt);
		margin: 0 auto;
	}
	.bloc-position-h--wide { max-width: none; }
	.bloc-position-h--left { margin-left: rem(.5*($maw-wide - $maw-txt)); }
	.bloc-position-h--right { margin-right: rem(.5*($maw-wide - $maw-txt)); }
}


/*----------  Encadré  ----------*/

[class*="bloc-frame"] {
	box-sizing: border-box;
	padding:rem($space-max);
	display: grid;
	row-gap: rem(.5*$space-max);

	> * { margin:0 }
	h2, h3, p { max-width: rem($maw-txt - $space-max); }

	[class*="bloc-frame"] {
		padding: 0;
		background-color: transparent;
	}
}

.bloc-frame--v1 { background-color: $blue; }
.bloc-frame--v2 { background-color: $green; }


/*----------  Alignement  ----------*/


/*=====  FIN Communs  =====*/

/*=======================================
=            Défaut / Titres            =
=======================================*/

/*----------  Paramètres  ----------*/

.block-library-heading-level-dropdown [role="menu"] :nth-child(1), // H1
.block-library-heading-level-dropdown [role="menu"] :nth-child(n+4) // H4, H5, H6
{ display: none; }


/*----------  Aperçu  ----------*/

.editor-post-title, 
.wp-block-heading {	@include font(900,1.4); }

.editor-post-title {
	font-size: rem($h1-font-size-l);
	margin-left: auto;
	margin-right: auto;
	max-width: rem($maw-txt) !important;
}

h2.wp-block-heading { font-size: rem($editor-h2-font-size-l); }
h3.wp-block-heading { font-size: rem($editor-h3-font-size-l); }


/*=====  FIN Défaut / Titres  =====*/

/*==============================
=            Espace            =
==============================*/

.wp-block-acf-pc-spacer {
	&:first-child, &:last-child { display: none; }
}
.bloc-spacer {
	border:1px solid #eee;
	color: #999;
	display: flex;
	justify-content: center;
	align-items: center;
}
.bloc-spacer--x2 { height: rem($space-max); }
.bloc-spacer--x3 { height: rem(2*$space-max); }
.bloc-spacer--x4 { height: rem(3*$space-max); }


/*=====  FIN Espace  =====*/

/*===================================
=            ACF / Image            =
===================================*/

/*----------  Aperçu  ----------*/

.bloc-image {
	display:flex;
	justify-content: center;

	.bloc-columns &, figure  {
		margin:0;
	}

	&.bloc-image--center {
		text-align: center;
	}
	&.bloc-image--right {
		text-align: right;
	}
	
	figcaption {
		font-style: italic;
		margin-top: .5rem;
	}
}

.bloc-image, .bloc-column-image {
	img {
		display: block;
		width: 100%;
	}
}


/*=====  FIN ACF / Image  =====*/

/*======================================
=            ACF / Citation            =
======================================*/

/*----------  Aperçu  ----------*/

.bloc-quote {
	position: relative;
	display: flex;
	flex-direction: column;
	font-family: $font-face;
	margin: 0;

	p {
		font-weight: 800;
		font-size: rem(24);
		margin:0;
		min-width: 50%;
		
		position: relative;
		z-index: 1;

		&::before, &::after {
			content:"";
			position: absolute;
			top:rem(-10);
			z-index: 0;
			width: rem(26);
			height: rem(20);
			background-image: svg-load('../images/icons/quote.svg');
			opacity: .2;
		}
		&::before {
			transform-origin: right top;
			transform: scale(-$quote-size,$quote-size);
			right:calc( 100% + #{rem(10)} );
		}
		&::after {
			transform-origin: right top;
			transform: scale($quote-size);
			right:rem(-10);
		}
	}
	cite {
		display: block;
		font-style: normal;
		font-weight: 600;
		margin-top:rem(5)
	}

	// &.bloc-quote--left { align-items: flex-start;}
	// &.bloc-quote--center { 
	// 	align-items: center;
	// 	text-align: center;
	// }
	// &.bloc-quote--right { 
	// 	align-items: flex-end;
	// 	text-align: right;
	// }
}


/*=====  FIN ACF / Citation  =====*/

/*=====================================
=            ACF / Galerie            =
=====================================*/

/*----------  Paramètres  ----------*/

.acf-gallery-side [data-name="title"],
.acf-gallery-side [data-name="description"],
.acf-gallery-side .media-types-required-info
{
	display: none;
}


/*----------  Aperçu  ----------*/

.gallery-list {
	list-style:none;
	display: flex;
	flex-wrap: wrap;
	justify-content: center;
	gap:1rem;
	padding:0;
}
.gallery-item {
	width: calc( (100% - 3rem) / 4 );

	.bloc-wide & {
		width: calc( (100% - 5rem) / 6 );
	}
}
.gallery-link {
	display: block;
}
.gallery-img {
	vertical-align: bottom;
}
.gallery-ico {
	display: none;
}


/*=====  FIN ACF / Galerie  =====*/

/*===================================
=            ACF / Embed            =
===================================*/

.bloc-embed {

	.iframe {
		position: relative;
		height: 0;
		background:none!important;
	
		iframe {
			position: absolute;
			z-index: 0;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
	}
}



/*=====  FIN ACF / Embed  =====*/

/*==================================
=            2 colonnes            =
==================================*/

.bloc-columns > div {
	display: grid;
	column-gap: rem($space-max);

	> div { flex: 1; }
	&.bloc-align-v--bottom { align-items: flex-end; }
	&.bloc-align-v--center { align-items: center; }
	&.bloc-align-v--both {
		align-items: stretch;
		> div { display: flex; }
	}
}

.bloc-column > div {
	display: flex;
	flex-direction: column;
	gap:rem($space-max);
	box-sizing: border-box;

	> * { margin: 0; }
}

.bloc-position-h--center {

	> div { grid-template-columns: repeat(6,1fr); }

	&.bloc-columns--3-3 > div > * { grid-column: span 3; }
	
	&.bloc-columns--2-4 > div > :nth-child(1),
	&.bloc-columns--4-2 > div > :nth-child(2) { grid-column: span 2; }
	&.bloc-columns--2-4 > div > :nth-child(2),
	&.bloc-columns--4-2 > div > :nth-child(1) { grid-column: span 4; }

}

.bloc-position-h--left,
.bloc-position-h--right {

	> div { grid-template-columns: repeat(8,1fr); }

	&.bloc-columns--4-4 > div > * { grid-column: span 4; }
	
	&.bloc-columns--2-6 > div > :nth-child(1),
	&.bloc-columns--6-2 > div > :nth-child(2) { grid-column: span 2; }
	&.bloc-columns--2-6 > div > :nth-child(2),
	&.bloc-columns--6-2 > div > :nth-child(1) { grid-column: span 6; }
	
	&.bloc-columns--3-5 > div > :nth-child(1),
	&.bloc-columns--5-3 > div > :nth-child(2) { grid-column: span 3; }
	&.bloc-columns--3-5 > div > :nth-child(2),
	&.bloc-columns--5-3 > div > :nth-child(1) { grid-column: span 5; }

}

.bloc-position-h--wide {

	> div { grid-template-columns: repeat(10,1fr); }

	&.bloc-columns--5-5 > div > * { grid-column: span 5; }
	
	&.bloc-columns--2-8 > div > :nth-child(1),
	&.bloc-columns--8-2 > div > :nth-child(2) { grid-column: span 2; }
	&.bloc-columns--2-8 > div > :nth-child(2),
	&.bloc-columns--8-2 > div > :nth-child(1) { grid-column: span 8; }
	
	&.bloc-columns--3-7 > div > :nth-child(1),
	&.bloc-columns--7-3 > div > :nth-child(2) { grid-column: span 3; }
	&.bloc-columns--3-7 > div > :nth-child(2),
	&.bloc-columns--7-3 > div > :nth-child(1) { grid-column: span 7; }
	
	&.bloc-columns--6-4 > div > :nth-child(2),
	&.bloc-columns--4-6 > div > :nth-child(1) { grid-column: span 4; }
	&.bloc-columns--6-4 > div > :nth-child(1),
	&.bloc-columns--4-6 > div > :nth-child(2) { grid-column: span 6; }

}


/*=====  FIN 2 colonnes  =====*/

/*===============================
=            Boutons            =
===============================*/

.bloc-buttons {

	.acf-block-preview & {
		max-width: rem($maw-txt);
		margin-inline: auto;
	}

	> ul {
		list-style: none;
		padding: 0;
		margin: 0;
		display: flex;
		gap:rem($button-space);
	}

	.button {
		border:none;
		border-radius: 0;
		display:inline-flex;
		align-items: center;
		gap:rem($button-space);
		height: rem($button-size);
		padding: rem(0,$button-space);
		background-color: $black;
		@include font(800,1);
		font-size: rem(18);
		color: $white;

		svg {
			fill: $white;
			display: block;
			height: rem($button-ico-size);
			width: auto;
		}
	}
	.button--arrow {
		.ico { transform: rotate(180deg); }
	}
	.button:hover {
		background-color: $black;
		color: $white;
	}

	&.bloc-text-align--center {
		text-align: center;
		ul { justify-content: center; }
	}
	&.bloc-text-align--right {
		text-align: right;
		ul { justify-content: flex-end; }
	}
}


/*=====  FIN Boutons  =====*/

/*==================================
=            Sous-pages            =
==================================*/

.bloc-subpages {
	list-style: none;
	margin: 0;
	padding: 0;
	display: grid;
	gap:rem($space-max);
	grid-template-columns: var(--pc-grid);
	@include font(600,1.2);
	font-size: rem(20);
	
	.card-list-item {
		grid-column: span 4;
		padding: rem(2*$space-max,0);
		border:1px solid #000;
		display: flex;
		justify-content: center;
		align-items: center;
	}
}


/*=====  FIN Sous-pages  =====*/
